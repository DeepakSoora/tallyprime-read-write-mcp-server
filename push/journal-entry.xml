<?xml version="1.0" encoding="utf-8"?>
<ENVELOPE>
    <HEADER>
        <VERSION>1</VERSION>
        <TALLYREQUEST>Import</TALLYREQUEST>
        <TYPE>Data</TYPE>
        <ID>Vouchers</ID>
    </HEADER>
    <BODY>
        <DESC>
            <STATICVARIABLES>
                <nunjuck>if targetCompany</nunjuck>
                <SVCURRENTCOMPANY>{{targetCompany | escape}}</SVCURRENTCOMPANY>
                <nunjuck>endif</nunjuck>
            </STATICVARIABLES>
        </DESC>
        <DATA>
            <TALLYMESSAGE xmlns:UDF="TallyUDF">
                <VOUCHER VCHTYPE="Journal" ACTION="Create">
                    <DATE>{{date}}</DATE>
                    <nunjuck>if voucherNumber</nunjuck>
                    <VOUCHERNUMBER>{{voucherNumber | escape}}</VOUCHERNUMBER>
                    <nunjuck>endif</nunjuck>
                    <VOUCHERTYPENAME>Journal</VOUCHERTYPENAME>
                    <nunjuck>if narration</nunjuck>
                    <NARRATION>{{narration | escape}}</NARRATION>
                    <nunjuck>endif</nunjuck>

                    <comment>begin</comment>Debit entries<comment>end</comment>
                    <nunjuck>for entry in debitEntries</nunjuck>
                    <ALLLEDGERENTRIES.LIST>
                        <LEDGERNAME>{{entry.ledgerName | escape}}</LEDGERNAME>
                        <ISDEEMEDPOSITIVE>Yes</ISDEEMEDPOSITIVE>
                        <nunjuck>if entry.forexAmount</nunjuck>
                        <AMOUNT>-{{entry.forexAmount}}{{entry.forexCurrency}} @ {{entry.forexRate}}/{{entry.forexCurrency}} = -{{entry.amount}}</AMOUNT>
                        <nunjuck>else</nunjuck>
                        <AMOUNT>-{{entry.amount}}</AMOUNT>
                        <nunjuck>endif</nunjuck>
                    </ALLLEDGERENTRIES.LIST>
                    <nunjuck>endfor</nunjuck>

                    <comment>begin</comment>Credit entries<comment>end</comment>
                    <nunjuck>for entry in creditEntries</nunjuck>
                    <ALLLEDGERENTRIES.LIST>
                        <LEDGERNAME>{{entry.ledgerName | escape}}</LEDGERNAME>
                        <ISDEEMEDPOSITIVE>No</ISDEEMEDPOSITIVE>
                        <nunjuck>if entry.forexAmount</nunjuck>
                        <AMOUNT>{{entry.forexAmount}}{{entry.forexCurrency}} @ {{entry.forexRate}}/{{entry.forexCurrency}} = {{entry.amount}}</AMOUNT>
                        <nunjuck>else</nunjuck>
                        <AMOUNT>{{entry.amount}}</AMOUNT>
                        <nunjuck>endif</nunjuck>
                    </ALLLEDGERENTRIES.LIST>
                    <nunjuck>endfor</nunjuck>
                </VOUCHER>
            </TALLYMESSAGE>
        </DATA>
    </BODY>
</ENVELOPE>
